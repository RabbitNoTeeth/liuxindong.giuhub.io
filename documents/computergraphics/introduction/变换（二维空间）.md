[TOC]

参考资料：

- [GAMES101_Lecture_03_Transformation](./resources/GAMES101/GAMES101_Lecture_03_Transformation.pdf)

- [GAMES101-现代计算机图形学入门-闫令琪](https://www.bilibili.com/video/BV1X7411F744?p=3)



# 1 线性变换

在二维平面中，图形变换后坐标满足以下关系：
$$
\begin{align}
x^\prime = ax + by \\
y^\prime = cx + dy
\end{align}
$$
同时，该关系可以表示为矩阵形式：
$$
\left(\begin{matrix} x^\prime \\ y^\prime \end{matrix}\right) = 
\left(\begin{matrix} a & b \\ c & d \end{matrix}\right)
\left(\begin{matrix} x \\ y \end{matrix}\right)
$$
那么，我们称这种变化为**线性变换**。



线性变换包括缩放、反射、切变、旋转。



## 1.1 缩放



![](./resources/images/2.1.png)

上图表示将左侧图形沿着x和y方向缩放相同的0.5倍（称之为**均匀缩放**），那么缩放后的坐标与原坐标关系为：
$$
\begin{align}
x^\prime = 0.5x \\
y^\prime = 0.5y
\end{align}
$$
我们可以用矩阵来表示这个关系：
$$
\left(\begin{matrix} x^\prime \\ y^\prime \end{matrix}\right) = 
\left(\begin{matrix} 0.5 & 0 \\ 0 & 0.5 \end{matrix}\right)
\left(\begin{matrix} x \\ y \end{matrix}\right)
$$


![](./resources/images/2.2.png)

上图表示将左侧图形沿着x和y方向分别缩放0.5倍和1被（称之为**非均匀缩放**），那么缩放后的坐标与原坐标关系为：
$$
\begin{align}x^\prime = 0.5x \\y^\prime = y\ \ \ \ \ \end{align}
$$
我们可以用矩阵来表示这个关系：
$$
\left(\begin{matrix} x^\prime \\ y^\prime \end{matrix}\right) = \left(\begin{matrix} 0.5 & 0 \\ 0 & 1 \end{matrix}\right)\left(\begin{matrix} x \\ y \end{matrix}\right)
$$


综上两个示例，可以得到在二维平面中，如果沿着x和y方向分别缩放$S_x$和$S_y$倍，那么缩放后的坐标与原坐标关系为：
$$
\begin{align}x^\prime = s_xx \\y^\prime = s_yy\end{align}
$$
用矩阵表示为：
$$
\left(\begin{matrix} x^\prime \\ y^\prime \end{matrix}\right) = \left(\begin{matrix} s_x & 0 \\ 0 & s_y \end{matrix}\right)\left(\begin{matrix} x \\ y \end{matrix}\right)
$$


## 1.2 反射（对称）

![](./resources/images/2.3.png)

上图表示将左侧图形以y方向做对称操作，那么对称后的坐标与原坐标关系为：
$$
\begin{align}x^\prime = -x \\y^\prime = y \ \ \ \end{align}
$$
可以用矩阵来表示为：
$$
\left(\begin{matrix} x^\prime \\ y^\prime \end{matrix}\right) = \left(\begin{matrix} -1 & 0 \\ 0 & 1 \end{matrix}\right)\left(\begin{matrix} x \\ y \end{matrix}\right)
$$


## 1.3 切变

![](./resources/images/2.4.png)

上图表示将左侧图形底部固定，沿着x方向拉伸右上角的点，使其移动a个单位（称之为切变），那么切变后的坐标与原坐标关系为：
$$
\begin{align}x^\prime = x+ay \\y^\prime = y \ \ \ \ \ \ \ \ \ \end{align}
$$
可以用矩阵来表示为：
$$
\left(\begin{matrix} x^\prime \\ y^\prime \end{matrix}\right) = \left(\begin{matrix} 1 & a \\ 0 & 1 \end{matrix}\right)\left(\begin{matrix} x \\ y \end{matrix}\right)
$$


## 1.4 旋转

![](./resources/images/2.6.png)

上图表示将左侧以原点为中心，逆时针旋转 $\theta$ 度，欲求旋转后坐标和原坐标的关系，我们可以选取旋转后的图形中的2个特殊点a个b来进行推导，根据线性变换的矩阵形式
$$
\left(\begin{matrix} x^\prime \\ y^\prime \end{matrix}\right) = 
\left(\begin{matrix} a & b \\ c & d \end{matrix}\right)
\left(\begin{matrix} x \\ y \end{matrix}\right)
$$
我们将 $a$、$a^\prime$ 坐标带入到上面的矩阵中，得到
$$
\left(\begin{matrix} cos\theta \\ sin\theta \end{matrix}\right) = 
\left(\begin{matrix} a & b \\ c & d \end{matrix}\right)
\left(\begin{matrix} 1 \\ 0 \end{matrix}\right)
$$
根据矩阵乘法，得到
$$
cos\theta = 1 \cdot a + 0 \cdot b \\
sin\theta = 1 \cdot c + 0 \cdot d
$$
即
$$
a = cos\theta \\
c = sin\theta
$$
同理，将 $b$、$b^\prime$ 坐标带入到矩阵中可求得
$$
b = -sin\theta \\
d = cos\theta
$$
从而得到旋转变换的矩阵表示为：
$$
\left(\begin{matrix} x^\prime \\ y^\prime \end{matrix}\right) = \left(\begin{matrix} cos\theta & -sin\theta \\ sin\theta & cos\theta \end{matrix}\right)\left(\begin{matrix} x \\ y \end{matrix}\right)
$$



# 2 平移变换

![](./resources/images/3.1.png)上图表示将左侧图形沿 $x$ 和 $y$ 方向分别移动 $t_x$ 和 $t_y$ 的距离，变换后坐标关系为：
$$
\begin{align}x^\prime = x + t_x \\y^\prime = y + t_y\end{align}
$$
而通过了解[《齐次坐标》](./齐次坐标.html)，我们知道可以用如下矩阵形式表示：
$$
\left(\begin{matrix} x^\prime \\ y^\prime \\ 1 \end{matrix}\right) = 
\left(\begin{matrix} 1 & 0 & t_x \\ 0 & 1 & t_y \\ 0 & 0 & 1 \end{matrix}\right)
\left(\begin{matrix} x \\ y \\ 1 \end{matrix}\right)
$$


# 3 逆变换

![](./resources/images/2.7.png)

上图表示左上角图形经过 $M$ 变换得到右上角图形，右上角图形在经过 $M^{-1}$ 变换得到原图形，那么我们称 $M^{-1}$ 为 $M$ 的逆变换，两者表示的矩阵满足：
$$
M \cdot M^{-1} = I \ \ \ \ \ \ \ \ \ (I 表示单位矩阵)
$$
 $M^{-1}$ 又称为 $M$ 的逆矩阵。



# 4 仿射变换

放射变换由一次线性变换和一次平移变换组成，用矩阵形式表示为：
$$
\left(\begin{matrix} x^\prime \\ y^\prime \end{matrix}\right) = 
\left(\begin{matrix} a & b \\ c & d \end{matrix}\right)
\left(\begin{matrix} x \\ y \end{matrix}\right) + 
\left(\begin{matrix} t_x \\ t_y \end{matrix}\right)
$$
引入齐次坐标后矩阵表示为：
$$
\left(\begin{matrix} x^\prime \\ y^\prime \\ 1 \end{matrix}\right) = 
\left(\begin{matrix} a & b & t_x \\ c & d & t_y \\ 0 & 0 & 1 \end{matrix}\right)
\left(\begin{matrix} x \\ y \\ 1 \end{matrix}\right)
$$


# 5 组合变换

在二维空间中，任何复杂的变换都可以分解成一个个的线性变换或者平移变换，以下图为例：

![](./resources/images/2.8.png)

将最左侧图形以图中标记的点为中心，逆时针旋转一定的角度得到最右侧图形，理解起来很简单，但是纵观上文中讲解的所有变换，发现其不属于任何一种，我们可以称之为一个复杂变换。

对于复杂变换，我们可以将其分解为多个简单变换的组合：最左侧图形先做平移变换 $T(-c)$，再做旋转变换 $R(\alpha)$，最后做平移变换 $T(c)$ 得到最右侧图形。



用矩阵表示为：
$$
T(c) \cdot R(\alpha) \cdot T(-c)
$$
**注意**，矩阵相乘的顺序为从右到左，对应变换操作的从前到后，由于矩阵相乘不满足交换律，所以矩阵的左右位置是固定不可变的，除非变换操作的顺序发生变化。