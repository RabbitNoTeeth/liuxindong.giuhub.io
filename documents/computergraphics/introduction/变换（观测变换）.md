[TOC]

参考资料：

- [GAMES101_Lecture_03_Transformation Cont](./resources/GAMES101/GAMES101_Lecture_04_Transformation Cont.pdf)

- [GAMES101-现代计算机图形学入门-闫令琪](https://www.bilibili.com/video/BV1X7411F744?p=4)



# 1 视图变换



在实际生活中是如何拍照呢？

- 寻找一个漂亮的景色和一群好朋友（模型）
- 将相机摆放到一个位置，调整好角度（视图）
- 茄子！（投影）



**在计算机中，模型是已存在的，那么如何定义相机呢？**

![](./resources/images/4.1.png)

- 定义相机的位置（Position），即 $\vec{e}$
- 定义相机看向的方向，即 $\hat{g}$​
- 定义相机顶部向上的方向，即 $\hat{t}$



好啦，确定好模型，也定义好了相机，如果模型和相机的相对位置不变，那么无论将两者放置在何种环境下，相机拍摄出的模型照片是不会变的。在三维空间中，相机和模型的位置可能是任意位置，那么我们能不能通过相对位置，来使在计算机中“拍照”这个问题更加简化一些呢？在三维空间中，原点的位置的固定的，无论相机位于何处，我们一定可以将相机变换到原点位置，根据相对位置原理，将模型做同样的变化，二者的相对位置不变，“拍照”结果就不会变。



根据上面的思路，我们定义相机的位置永远位于原点，并且看向 $-z$ 方向，相机顶部向上的方向为 $y$​ 方向，接下来，对于任意相机 $M_{view}$，如何将其变换到原点位置呢？

![](./resources/images/4.2.png)

- 移动到原点
- 旋转 $g$ 到 $-z$ 方向
- 旋转 $t$​​ 到 $y$​​​ 方向
- 旋转 $(g \times t)$​ 到 $x$ 方向

该变换过程包含旋转和平移变化，即该变换过程为仿射变换，可以写作：
$$
M_{view} = R_{view}T_{view}
$$
很容易写出平移变换 $T_{view}$​：
$$
T_{view} = \left(\begin{matrix} 1 & 0 & 0 & -x_e \\ 0 & 1 & 0 & -y_e \\ 0 & 0 & 1 & -z_e \\ 0 & 0 & 0 & 1 \end{matrix}\right)
$$
 $g$​​​​​ 到 $-z$​​​​​ 方向、 $t$​​​​​ 到 $y$​​​​​ 方向、 $(g \times t)$​​​​​ 到 $x$​​​​​ 方向的变换不容易得到，尝试从其逆变换的角度思考，即： 旋转 $z$​​​​​ 到 $-g$​​​​​ 方向、旋转 $y$​​​​​ 到 $t$​​​​​ 方向、旋转 $x$ 到 $(g \times t)$​​​​​ 方向，这个逆变换可以写出：
$$
R_{view}^{-1} = \left(\begin{matrix} x_{\hat{g}\times\hat{t}} & x_t & x_{-g} & 0 \\ y_{\hat{g}\times\hat{t}} & y_t & y_{-g} & 0 \\ z_{\hat{g}\times\hat{t}} & z_t & z_{-g} & 0 \\ 0 & 0 & 0 & 1 \end{matrix}\right)
$$
根据正交矩阵特性，可得到 $R_{view}$：
$$
R_{view} = \left(\begin{matrix} x_{\hat{g}\times\hat{t}} & y_{\hat{g}\times\hat{t}} & z_{\hat{g}\times\hat{t}} & 0 \\ x_t & y_t & z_t & 0 \\ x_{-g} & y_{-g} & z_{-g} & 0 \\ 0 & 0 & 0 & 1 \end{matrix}\right)
$$


这个相机变换的过程称为**视图变换**，相机变换完成后，模型只需要做相同变换即可，所以这个过程又称为**视图模型变换**。



模型和视图（相机）已就位，下面就要最后的“拍照”（投影）啦！



# 2 投影变换

// 未完待续...
