[TOC]

Netty的主要构建块包括：Channel、回调、Future、事件和ChannelHandler。



# 1 Channel

Channel代表了一个到实体的开放连接，如读操作和写操作。

目前，可以把Channel看作是传入（入站）或者传出（出站）数据的载体，它可以被打开或者关闭，连接或者断开连接。



# 2 回调

Netty在内部使用了回调来处理事件，当一个回调被触发时，相关的事件可以被一个ChannelHandler的实现处理。



# 3 Future

Future提供了另一种在操作完成时通知应用程序的方式。这个对象可以看作是一个异步操作的结果的占位符，它在将来的某个时刻完成，并提供对其结果的访问。



# 4 事件和ChannelHandler

Netty是一个网络编程框架，所以事件是按照它们与入站或出站数据流的相关性进行分类的。



**可能由入站数据或者相关的状态改变而触发的事件包括：**

1. 连接已被激活或者连接失活
2. 数据读取
3. 用户事件
4. 错误事件



**出站事件是未来将会触发的某个动作的操作结果，这些动作包括：**

1. 打开或者关闭到远程节点的连接。
2. 将数据写到或者冲刷到套接字。



每个事件都可以被分发给ChannelHandler类中的某个用户实现的方法。



## 补充：EventLoop

Netty在内部，将会为每个Channel分配一个EventLoop，用以处理所有事件，包括: 注册感兴趣的事件、将事件派发给ChannelHandler、安排进一步的动作。

EventLoop本身只由一个线程驱动，其处理了一个Channel的所有I/O事件，并且在该EventLoop的整个生命周期内都不会改变。这个设计消除了你可能有的在ChannelHandler 实现中需要进行同步的任何顾虑。