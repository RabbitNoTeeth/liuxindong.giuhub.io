[TOC]

接口和抽象类都可以用来定义多个实现的类型，但是在实际开发中，接口优于抽象类。

# 1 为什么接口优于抽象类?

1. 接口可以定义更多类型。
   一个普通的类只能继承一个抽象类，但是却可以实现多个接口，这就为接口带来了更多的灵活性。我们可以将不同的功能定义封装到不同的接口中，使接口更加细化，便于重用，一个普通的类在定义类型时根据其功能可以有更多的接口可以选择。如果是抽象类，那么就需要将这些功能全部定义在一起，这样不仅抽象类更臃肿，而且其类型定义也更加不明确。

2. 抽象类引入了继承，一定程度上会带来继承的风险。
   在前面的章节中，有涉及到不合理的继承设计带来的各种风险，以及后期兼容上的问题。如果抽象类的设计不合理，那么势必会引入这些继承的问题。而接口只定义行为，将行为的实现全权交给实现类，从而避免了继承带来的许多风险。



# 2 不要全权否认抽象类


虽然接口的选择优于抽象类，但是并不能全权否认抽象类的意义。实际开发或者框架中，更多的选择是接口和抽象类配合使用。为每个重要的接口提供一个抽象的骨架实现，也就是抽象类，其中定义了该接口类型一些通用的方法实现，避免多个实现类中出现重复的样板代码。如此便将两者的优点结合起来。接口的作用仍然是定义类型，但是骨架实现类接管了所有与接口实现相关的工作。

使用抽象类带来的另一个好处就是，使类型的演变更加容易。考虑这样一种场景，当你定义了一个接口，并且在客户端广泛使用，在不断的版本更迭中，你发现该接口需要添加一些新的功能，如果你在接口中直接定义新方法，那么它的所有客户端都会受到影响，必须提供该方法的实现。这在生产环境下显然是不合理的。如果是抽象类，我们只需要在抽象类中添加新的方法，或者在接口添加新的方法后，在抽象类中提供实现，这样不会影响客户端，当客户端需要时，只需要直接调用就可以。



# 小结


简而言之，接口是定义允许多个实现类型的最佳选择，它提供了更强的灵活性。但是当类型需要更强的演变性和兼容性时，应该使用抽象类。通常，我们的建议是：在定义接口的同时提供骨架实现类，也就是抽象类。最大程度保证类型的演变性和兼容性。