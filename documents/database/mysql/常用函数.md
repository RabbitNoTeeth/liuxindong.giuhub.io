[TOC]



# 1 字符串函数

|         函数          |                             功能                             |
| :-------------------: | :----------------------------------------------------------: |
|   concat(s1,s2...)    |                  连接多个字符串为一个字符串                  |
| insert(str,x,y,instr) | 将字符串str从第x位置开始,y个字符长度的子串替换为字符串instr  |
|      lower(str)       |                     将字符串str变为小写                      |
|      upper(str)       |                     将字符串str变为大写                      |
|      left(str,x)      |                 返回字符串str最左边的x个字符                 |
|     right(str,x)      |                 返回字符串str最右边的x个字符                 |
|    lpad(str,n,pad)    |        用字符串pad对str最左边进行填充,直到满足长度为n        |
|    rpad(str,n,pad)    |        用字符串pad对str最右边进行填充,直到满足长度为n        |
|      ltrim(str)       |                   去掉字符串str左边的空格                    |
|      rtrim(str)       |                   去掉字符串str右边的空格                    |
|     repeat(str,x)     |                  返回字符串str重复x次的结果                  |
|   replace(str,a,b)    |                  用字符串b替换str中所有的a                   |
|     strcmp(s1,s2)     | 比较字符串s1和s2的ASCII码值得大小,如果s1小于s2,返回-1,等于返回0,大于返回1 |
|       trim(str)       |                 去掉字符串str左右两侧的空格                  |
|  substring(str,x,y)   |              返回字符串str从x位置起y长度的子串               |



# 2 数值函数

|     函数      |                功能                |
| :-----------: | :--------------------------------: |
|    abs(x)     |           返回x的绝对值            |
|    cell(x)    |        返回大于x的最小整数         |
|   floor(x)    |        返回小于x的最大整数         |
|   mod(x,y)    |            返回x/y的模             |
|    rand()     |         返回0~1内的随机数          |
|  round(x,y)   | 返回数字x的四舍五入的有y位小数的值 |
| truncate(x,y) |    返回数字x截断为y位小数的结果    |



# 3 日期和时间函数

|               函数                |                    功能                    |
| :-------------------------------: | :----------------------------------------: |
|             curdate()             |                返回当前日期                |
|             curtime()             |                返回当前时间                |
|               now()               |            返回当前的日期和时间            |
|       unix_timestamp(date)        |          返回日期date的unix时间戳          |
|           from_unixtime           |           返回unix时间戳的日期值           |
|            week(date)             |        返回日期date为一年中的第几周        |
|            year(date)             |             返回日期date的年份             |
|            hour(time)             |              返回time的小时值              |
|           minute(time)            |              返回time的分钟值              |
|          monthname(date)          |              返回date的月份名              |
|       date_format(date,fmt)       |      返回按字符串fmt格式化日期date值       |
| date_add(date,INTERVAL expr type) | 返回一个日期或时间加上一个时间间隔的时间值 |
|       datediff(expr,expr2)        | 返回起始时间expr和结束时间expr2之间的天数  |

**补充:**

```
date_add(date,INTERVAL expr type)
```

INTERVAL为关键字，不变，expr是一个时间表达式，type是间隔类型。mysql提供了13种间隔类型: hour、minute、second、year、month、day、year_month、day_hour、day_minute、day_second、hour_minute 、hour_second、minute_second。



示例1: 返回当前时间54天后的日期

```
select date_add(now(),INTERVAL 54 day) 
```


示例2: 返回当前时间1年2个月后的日期

```
select date_add(now(),INTERVAL ‘1_2’ year_month) 
```


示例3: 返回35天前的日期 

```
select date_add(now(),INTERVAL -35 day) 
```


示例4: 返回1年2个月前的日期 

```
select date_add(now(),INTERVAL ‘-1_-2’ year_month)
```



# 4 流程函数

|                             函数                             |                     功能                     |
| :----------------------------------------------------------: | :------------------------------------------: |
|                        if(value,t f)                         |        如果value为真,返回t,否则返回f         |
|                       ifnull(value,t)                        |     如果value为null,返回t,否则返回value      |
|      case when [value] then [result] else [default] end      |  如果value为真,返回result. 否则返回default   |
| case [expr] when [value] then [result]... else [default] end | 如果expr等于value,返回result,否则返回default |





# 5 其他常用函数

|      函数      |                             功能                             |
| :------------: | :----------------------------------------------------------: |
|   database()   |                      返回当前数据库名称                      |
|   version()    |                      返回当前数据库版本                      |
|     user()     |                     返回当前登陆的用户名                     |
| inet_aton(ip)  |           返回ip地址的数字表示(可以用于比较地址段)           |
| inet_ntoa(num) |                   返回数字num代表的ip地址                    |
| password(str)  | 返回字符串str的加密版本(只用来设置系统用户的密码,不能用于对应用的数据进行加密) |
|    md5(str)    |       返回字符串str的md5值(常用于对应用的数据进行加密)       |