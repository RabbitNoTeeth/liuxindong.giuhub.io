---
title: 初识Lambda
tags: 
- java
- java8
- Lambda
---

# 1.定义

Lambda表达式可以理解为简洁的表示可传递的匿名函数的一种方式



# 2.特点

① **匿名**： 没有名称

② **函数**：它不像方法那样属于某个特定的类,但是和方法一样,lambda有参数列表、函数主体、返回类型，还可能有可以抛出的异常列表

③ **传递**：可以作为参数传递给方法或者存储在变量中

④ **简洁**：无需像匿名类那样写很多模版代码



# 3.基本语法

```
(parameters) -> expression     或者      (paramters) -> {statements;}
```

即：（参数列表） -> 函数主体

其中，’函数主体’可以是单行代码，也可以是多行代码，多行时要使用｛｝括起来



# 4.实例详解

```
1. (String s) -> s.length()            传入字符串参数s，返回s的长度
2. (Apple a) -> a.getWeight()>50       传入参数Apple，返回apple的weight重量是否大于50的boolean值
3. (int x,int y) -> {                  传入参数x和y，打印出其相加的结果
     System.out.println('result:');
     System.out.println(x+y);
   }
4. () -> 40                            不需要参数，直接返回int值40
```



# 5.Lambda与变量

① Lambda可以没有限制的捕获实例变量和静态变量，但局部变量必须声明为final，或者事实上是final。也就是说，Lambda表达式只能捕获指派给它们的局部变量一次

代码示例：

```
// 成功示例
int num = 200;                              
Runnable r = () -> System.out.println(num)   // num虽然是局部变量，但是在上下文中并没有对num进行更改，可以说num是隐式的final

// 失败示例
int num = 200;
Runnable r = () -> System.out.println(num)   // 无法编译，报错，因为 num 作为局部变量，在上下文中出现了再次修改的情况，其不再是隐式的final
num = 300；
```



如果不得不在Lambda中捕获局部变量，可通过数组来“欺骗”编译器来实现：

```
int num = 200;
int[] arr = { num };
Runnable r = () -> System.out.println(arr[0])   // 成功，编辑器捕获的局部变量实际为arr数组，这个数组在上下文中并没有被修改，所以能够成功
num = 300；
```



② 如果允许捕获可变的局部变量，就会引发线程不安全的可能性，这不是java想看到的，java8的重要思想就是实现函数式编程的支持和实现多核的并发优化